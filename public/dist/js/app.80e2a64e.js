(function(t){function e(e){for(var r,a,o=e[0],c=e[1],u=e[2],p=0,f=[];p<o.length;p++)a=o[p],Object.prototype.hasOwnProperty.call(s,a)&&s[a]&&f.push(s[a][0]),s[a]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(t[r]=c[r]);l&&l(e);while(f.length)f.shift()();return i.push.apply(i,u||[]),n()}function n(){for(var t,e=0;e<i.length;e++){for(var n=i[e],r=!0,o=1;o<n.length;o++){var c=n[o];0!==s[c]&&(r=!1)}r&&(i.splice(e--,1),t=a(a.s=n[0]))}return t}var r={},s={app:0},i=[];function a(e){if(r[e])return r[e].exports;var n=r[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=t,a.c=r,a.d=function(t,e,n){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)a.d(n,r,function(e){return t[e]}.bind(null,r));return n},a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=e,o=o.slice();for(var u=0;u<o.length;u++)e(o[u]);var l=c;i.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"085d":function(t,e,n){},1818:function(t,e,n){"use strict";var r=n("52f3"),s=n.n(r);s.a},"1b6b":function(t,e,n){"use strict";var r=n("db97"),s=n.n(r);s.a},"23be":function(t,e,n){"use strict";var r=n("23c4"),s=n.n(r);e["default"]=s.a},"23c4":function(t,e){},"31cd":function(t,e,n){},"3d99":function(t,e,n){},"3dfd":function(t,e,n){"use strict";var r=n("ad02"),s=n("23be"),i=(n("1818"),n("6691")),a=Object(i["a"])(s["default"],r["a"],r["b"],!1,null,null,null);e["default"]=a.exports},4364:function(t,e,n){"use strict";var r=n("670b"),s=n.n(r);s.a},4624:function(t,e,n){"use strict";var r=n("085d"),s=n.n(r);s.a},4862:function(t,e,n){},"52ab":function(t,e,n){"use strict";var r=n("6aec"),s=n.n(r);s.a},"52f3":function(t,e,n){},"56d7":function(t,e,n){"use strict";n.r(e);n("dac5"),n("6e26"),n("9604"),n("df67");var r=n("6e6d"),s=n("3dfd"),i=(n("63ff"),n("ad3e")),a=n("c478"),o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"login-page"},[n("div",{staticClass:"center login-wrpper-box"},[t._m(0),n("m-login-box")],1)])},c=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"pic-info"},[n("div",{staticClass:"circle"}),n("div",{staticClass:"info"},[n("p",[t._v("制作人: 刘友刚,张旭东,岳长春")]),n("p",[t._v("制作时间: 2019")]),n("p",[t._v("指导老师: 陈雪冬")])])])}],u=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"login_box"},[n("h3",{staticClass:"title neo"},[t._v(t._s(t.title))]),"login"==t.cur?n("div",[n("m-input",{model:{value:t.username,callback:function(e){t.username=e},expression:"username"}}),n("m-input",{attrs:{type:"password",placeholder:"密码"},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}}),n("div",{staticClass:"btns clearfix"},[n("m-button",{attrs:{text:"登陆"},on:{callback:t.login}}),n("m-button",{attrs:{text:"前往修改密码"},on:{callback:t.gotoRepass}})],1)],1):t._e(),"repass"==t.cur?n("div",[n("m-input",{model:{value:t.cusername,callback:function(e){t.cusername=e},expression:"cusername"}}),n("m-input",{attrs:{type:"password",placeholder:"原密码"},model:{value:t.cpassword,callback:function(e){t.cpassword=e},expression:"cpassword"}}),n("m-input",{attrs:{type:"password",placeholder:"输入要修改的密码"},model:{value:t.crepassword,callback:function(e){t.crepassword=e},expression:"crepassword"}}),n("div",{staticClass:"btns clearfix"},[n("m-button",{attrs:{text:"修改密码"},on:{callback:t.changePsd}}),n("m-button",{attrs:{text:"前往登陆页面"},on:{callback:t.gotoLogin}})],1)],1):t._e()])},l=[],p=(n("2338"),n("f763"),n("fb37"),n("5bf7")),f=n("591a"),h=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"m_input"},[n("label",[null!=t.title?n("span",[t._v(t._s(t.title))]):t._e(),n("input",{attrs:{type:t.type,placeholder:t.placeholder},domProps:{value:t.value},on:{input:t.change}})])])},d=[],m={props:{title:{type:String,default:null},placeholder:{type:String,default:"用户身份证"},type:{type:String,default:"text"},value:{type:String,default:""}},methods:{change:function(t){this.$emit("input",t.target.value)}},data:function(){return{}}},b=m,g=(n("de0b"),n("6691")),v=Object(g["a"])(b,h,d,!1,null,null,null),w=v.exports,_=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("button",{staticClass:"m-btn neo",style:t.mstyle,domProps:{textContent:t._s(t.text)},on:{click:t.dosome}})},x=[],y={props:{text:{type:String,required:!0},mstyle:{type:Object}},data:function(){return{}},methods:{dosome:function(){this.$emit("callback")}}},j=y,k=(n("c7fe"),Object(g["a"])(j,_,x,!1,null,null,null)),C=k.exports,O=n("2427"),T=n.n(O),P=T.a.create({timeout:2e3,withCredentials:!0,headers:{"Content-Type":"application/x-www-form-urlencoded"},transformRequest:[function(t){var e="";for(var n in t)e+=encodeURIComponent(n)+"="+encodeURIComponent(t[n])+"&";return e}]});P.interceptors.request.use((function(t){return"GET"==t.method.toUpperCase()||t.method.toUpperCase(),t}),(function(t){Promise.reject(t)})),P.interceptors.response.use((function(t){if(console.log("data:",t.data),"OK"==t.statusText)return t.data}),(function(t){var e=t.message;if("timeout of 2000ms exceeded"===e)return{code:2};Promise.reject(t)}));var M=P;function S(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function E(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?S(n,!0).forEach((function(e){Object(p["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):S(n).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var $={mounted:function(){this.$route.query.errinfo&&this.showMessage(this.$route.query.errinfo,2)},data:function(){return{title:"考试系统登陆",cur:"login",username:"",password:"",cusername:"",cpassword:"",crepassword:"",isshow:!1,message:"提示信息",isClick:!1,boxMessage:null}},methods:E({gotoRepass:function(){this.isClick=!1,this.cur="repass"},gotoLogin:function(){this.isClick=!1,this.cur="login"},showMessage:function(t,e){switch(this.boxMessage&&this.boxMessage.close(),e){case 1:this.boxMessage=this.$message(t);break;case 2:this.boxMessage=this.$message.error(t);break}},login:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!this.isClick){t.next=2;break}return t.abrupt("return");case 2:return this.isClick=!0,t.next=5,M.post("/api/login",{username:this.username,password:this.password});case 5:if(e=t.sent,e){t.next=9;break}return this.isClick=!1,t.abrupt("return");case 9:e.code?2==e.code?this.showMessage("网络请求超时",2):1==e.code&&(this.showMessage(e.msg||"登陆成功",1),e.data.subject=e.major_subject,this.init(e.data),this.$route.query.redirect?this.$router.push(this.$route.query.redirect):this.$router.push("/answer")):this.showMessage(e.msg||"登陆失败:账号或密码错误,请重试",2),this.isClick=!1;case 11:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),changePsd:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!this.isClick){t.next=2;break}return t.abrupt("return");case 2:return this.isClick=!0,t.next=5,M.post("/api/changePassword",{username:this.cusername,cpassword:this.cpassword,crepassword:this.crepassword});case 5:if(e=t.sent,e){t.next=9;break}return this.isClick=!1,t.abrupt("return");case 9:e.code?2==e.code?this.showMessage("网络请求超时",2):1==e.code&&(this.showMessage(e.msg||"修改密码成功",1),this.gotoLogin()):this.showMessage(e.msg||"修改失败,请检查输入",2),isClick=!1;case 11:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},Object(f["b"])("user",["init"])),computed:E({},Object(f["c"])({userinfo:function(t){return t.user.userinfo}})),components:{MInput:w,MButton:C}},q=$,I=(n("7d4d"),Object(g["a"])(q,u,l,!1,null,null,null)),R=I.exports,L={data:function(){return{}},components:{MLoginBox:R}},D=L,N=(n("52ab"),Object(g["a"])(D,o,c,!1,null,null,null)),B=N.exports,A=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"answer"},["checkbox"==t.page?n("div",{staticClass:"check-box center"},[n("div",{staticClass:"avator"},[n("span",{on:{click:function(e){return t.$router.push("/score")}}},[t._v("查看以前考试成绩")])]),n("el-input",{staticClass:"classmate",attrs:{placeholder:"当前班级",readonly:""},model:{value:t.input,callback:function(e){t.input=e},expression:"input"}}),n("br"),n("el-input",{staticClass:"classmate",attrs:{placeholder:"当前班级",readonly:""},model:{value:t.options[0].major_name,callback:function(e){t.$set(t.options[0],"major_name",e)},expression:"options[0].major_name"}}),n("br"),n("el-select",{staticClass:"examtype",attrs:{placeholder:"请选择考试科目"},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}},t._l(t.options,(function(t){return n("el-option",{key:t.value,attrs:{label:t.subject_name,value:t.id}})})),1),n("br"),n("el-button",{staticClass:"enter-btn",attrs:{type:"primary",plain:""},on:{click:t.startExam}},[t._v("开始考试")])],1):t._e(),"answerbox"==t.page?n("div",{staticClass:"answer_box_wrapper"},[n("h3",{staticClass:"main-title"},[t._v(t._s(t.userinfo.username.trim())+"同学正在进行"+t._s(t.curSubject)+"考试,请认真对待考试哦")]),n("div",{staticClass:"answer_box"},[n("div",{staticClass:"box_header"},[n("div",{staticClass:"pro"},[n("m-process",{attrs:{rate:t.rate}})],1),n("span",{staticClass:"total"},[t._v("当前第"+t._s(t.cur)+"题共"+t._s(t.questions.length)+"题")]),n("span",{staticClass:"time"},[t._v("剩下时间: "+t._s(t.formatTime))])]),n("div",{staticClass:"tab"},[n("i",{staticClass:"iconfont icon-label_fill"}),n("span",[t._v(t._s(t.typeName))])]),n("div",{staticClass:"answer_place"},[n("tip-title",{attrs:{count:t.cur,question:t.curTopic.title}}),2==t.topicType?n("div",{staticClass:"answers"},[n("el-radio-group",{on:{change:t.fin},model:{value:t.curTopic.answer,callback:function(e){t.$set(t.curTopic,"answer",e)},expression:"curTopic.answer"}},[n("el-radio",{attrs:{label:"A"}},[n("span",{domProps:{innerHTML:t._s(t.curTopic.A)}})]),n("el-radio",{attrs:{label:"B"}},[n("span",{domProps:{innerHTML:t._s(t.curTopic.B)}})]),n("el-radio",{attrs:{label:"C"}},[n("span",{domProps:{innerHTML:t._s(t.curTopic.C)}})]),n("el-radio",{attrs:{label:"D"}},[n("span",{domProps:{innerHTML:t._s(t.curTopic.D)}})])],1)],1):t._e(),1==t.topicType?n("div",{staticClass:"answers"},[n("el-radio-group",{on:{change:t.fin},model:{value:t.curTopic.answer,callback:function(e){t.$set(t.curTopic,"answer",e)},expression:"curTopic.answer"}},[n("el-radio",{attrs:{label:"1"}},[t._v("对")]),n("el-radio",{attrs:{label:"0"}},[t._v("错")])],1)],1):t._e(),3==t.topicType?n("div",{staticClass:"answers"},[n("el-checkbox-group",{on:{change:t.fin},model:{value:t.curTopic.answer,callback:function(e){t.$set(t.curTopic,"answer",e)},expression:"curTopic.answer"}},[n("el-checkbox",{attrs:{label:"A"}},[n("span",{domProps:{innerHTML:t._s(t.curTopic.A)}})]),n("el-checkbox",{attrs:{label:"B"}},[n("span",{domProps:{innerHTML:t._s(t.curTopic.B)}})]),n("el-checkbox",{attrs:{label:"C"}},[n("span",{domProps:{innerHTML:t._s(t.curTopic.C)}})]),n("el-checkbox",{attrs:{label:"D"}},[n("span",{domProps:{innerHTML:t._s(t.curTopic.D)}})])],1)],1):t._e(),4==t.topicType?n("div",{staticClass:"answers"},[""===t.curTopic.pathinfo?n("el-input",{attrs:{type:"textarea",rows:6,placeholder:"请输入内容",resize:"none","data-type":"4"},on:{change:t.fin},model:{value:t.curTopic.answer,callback:function(e){t.$set(t.curTopic,"answer",e)},expression:"curTopic.answer"}}):t._e(),""!==t.curTopic.pathinfo?n("div",{staticClass:"upload-box"},[n("div",[n("p",{staticClass:"b15"},[t._v("🔹 点击下面按钮进行下载考题")]),n("a",{staticClass:"my-btn b15",attrs:{href:t.downHref}},[t._v("点击下载考试题目")]),n("p",{staticClass:"b15"},[t._v("🔹 题目做完后打包成zip点击下面按钮上传(可重复上传只保留最后一次上传)")]),n("el-upload",{ref:"upload",staticClass:"upload b15",attrs:{action:"/api/upload",name:"file",limit:1,data:{id_card:t.userinfo.id_card,subject_id:t.examingInfo.subject_id},"on-success":t.handlePreview,"file-list":t.fileList,"auto-upload":!0,"on-error":t.uploadError,drag:""}},[n("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[t._v("选取文件进行上传(可拖拽上传)")])],1),t.curTopic.answer?n("div",[t._v("\n                                🔹当前上传的文件:"),n("span",{staticStyle:{color:"#ffbb88"}},[t._v(t._s(t.curTopic.answer))]),t._v("🔹 \n                            ")]):t._e()],1)]):t._e()],1):t._e()],1),n("div",{staticClass:"submit-box"},[n("m-button",{staticClass:"nm",attrs:{mstyle:t.buttonStyle,text:"上一题"},on:{callback:t.prev}}),n("m-button",{staticClass:"nm",attrs:{mstyle:t.buttonStyle,text:"提交试卷"},on:{callback:t.commit}}),n("m-button",{staticClass:"nm",attrs:{mstyle:t.buttonStyle,text:"下一题"},on:{callback:t.next}})],1),n("div",{staticClass:"bottom clearfix"},[n("ul",{on:{click:t.cutQuestion}},t._l(t.questions.length,(function(e,r){return n("li",{key:r,class:{fin:t.isAnswer(r),"s-btn":!0,cur:r==t.cur-1}},[t._v("\n                        "+t._s(e)+"\n                    ")])})),0)])])]):t._e()])},H=[],J=(n("7364"),n("d4d5"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"process-wrapper"},[n("div",{staticClass:"process-inner",style:{width:t.rate}}),n("div",{staticClass:"title"},[t._v("\n        已完成"+t._s(t.rate)+"\n    ")])])}),Q=[],U={props:{rate:{type:String,default:"10%"}},data:function(){return{}}},V=U,z=(n("1b6b"),Object(g["a"])(V,J,Q,!1,null,null,null)),F=z.exports,K=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"tip"},[n("label",[n("input",{attrs:{"data-type":t.dataType,name:t.name,type:t.type},domProps:{checked:t.check,value:t.value},on:{change:t.changeValue}}),n("span",[t._v(t._s(t.answer))])])])},G=[],X={props:{type:{type:String,default:"radio"},answer:{type:String,require:!0},name:{type:String,required:!0},value:{type:String,default:"0"},dataType:{type:String,default:null},check:{type:Boolean,default:!1}},data:function(){return{}},methods:{changeValue:function(t){this.$emit("changeValue",t)}}},W=X,Y=(n("4624"),Object(g["a"])(W,K,G,!1,null,null,null)),Z=Y.exports,tt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"title",domProps:{innerHTML:t._s(t.title)}})},et=[],nt={props:{count:{type:Number,default:1},question:{type:String,default:"问题是?"}},computed:{title:function(){return"第".concat(this.count,"题丶").concat(this.question)}}},rt=nt,st=(n("6897"),Object(g["a"])(rt,tt,et,!1,null,null,null)),it=st.exports;function at(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function ot(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?at(n,!0).forEach((function(e){Object(p["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):at(n).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var ct={data:function(){return{buttonStyle:{fontSize:"12px",width:"80px",height:"30px",marginTop:"8px",marginRight:"20px"},type:[" ","判断题","单选题","多选题","操作题"],page:"checkbox",options:[],value:"",input:"",questions:[],cur:1,finQuesCount:0,curValue:null,targetTime:null,formatTime:null,allowNum:3,message:null,alert:null,examingInfo:{},fileList:[]}},created:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(this.input=this.userinfo.class_name,this.options=this.userinfo.subject,this.examingInfo=JSON.parse(this.getCookie("examingInfo")),this.examingInfo){t.next=5;break}return t.abrupt("return");case 5:this.examingInfo.user===this.userinfo.id_card&&(this.info=this.$notify({title:"考试提醒",message:"你有正在进行的考试,点击继续考试",duration:0,showClose:!1,type:"warning",onClick:function(){if(Date.now()>e.localexpire)return e.info.close(),e.showMessage("当前考试已结束",1);e.questions=e.examingInfo.question,e.targetTime=e.examingInfo.time,e.subject_id=e.examingInfo.subject_id,e.startTime(),e.calc(),e.stopShortCutKey(),e.page="answerbox",e.info.close()}}));case 6:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),methods:{isAnswer:function(t){return this.questions[t].answer instanceof Array!==!0&&this.questions[t].answer||this.questions[t].answer instanceof Array&&0!==this.questions[t].answer.length},cutQuestion:function(t){this.cur=Number(t.target.innerText)},fin:function(){this.calc(),this.examingInfo.question=this.questions,this.setCookie("examingInfo",JSON.stringify(this.examingInfo),this.targetTime)},uploadError:function(){this.showMessage("上传失败,请重试",2)},handlePreview:function(t,e){t.code?(this.showMessage("上传成功",1),this.curTopic.answer=e.name,this.fileList=[],this.calc(),this.examingInfo.question=this.questions,this.setCookie("examingInfo",JSON.stringify(this.examingInfo),this.targetTime)):this.showMessage("上传失败,请重试",2)},startTime:function(){var t=this;if(!this.targetTime){var e=new Date;this.targetTime=e.setSeconds(e.getSeconds()+5400)}this.timer=setInterval((function(){var e=t.targetTime-new Date;t.formatTime=t.format(e),"00:00"===t.formatTime&&(t.showMessage("答题时间结束,自动交卷",1),t.commitExam(2),clearInterval(t.timer))}))},showMessage:function(t,e){switch(this.message&&this.message.close(),e){case 1:this.message=this.$message(t);break;case 2:this.message=this.$message.error(t);break}},stopShortCutKey:function(){var t=this;if("511922200101100516"!==this.userinfo.id_card&&"510311200012282917"!==this.userinfo.id_card&&"513821200105278856"!==this.userinfo.id_card){var e=this.allowNum;this.func=function(){t.curTopic&&4===t.curTopic.type||t.alert||(t.alert=t.$alert("认真考试,否则将视为作弊","提示",{confirmButtonText:"确定",callback:function(){if(e--,e<=0)return window.removeEventListener("blur",t.func),t.commitExam(1),t.showMessage("自动交卷",2);t.alert=null}}))},window.addEventListener("blur",this.func)}},calc:function(){var t=0;this.questions.forEach((function(e){e.answer&&e.answer.length>0&&t++})),this.finQuesCount=t},next:function(){this.cur>=this.questions.length?(this.showMessage("这已经是最后一题",1),this.cur=this.questions.length):this.cur++},prev:function(){this.cur<=1?this.cur=1:this.cur--},commit:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.$confirm("确认提交试卷吗","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){if(e.finQuesCount!==e.questions.length)return e.showMessage("必须完成所有题,才能交卷",2);e.commitExam()}));case 1:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),commitExam:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e,n,r=arguments;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=r.length>0&&void 0!==r[0]?r[0]:0,t.next=3,M.post("/api/commitQuestion",{questions:JSON.stringify(this.questions),subject_id:this.subject_id,error:e});case 3:n=t.sent,2==n.code?this.showMessage("网络请求超时",2):1==n.code&&(this.delCookie("examingInfo"),this.$router.push("/commit"));case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),setCookie:function(t,e,n){var r={data:e,time:Date.now(),expire:n};localStorage.setItem(t,JSON.stringify(r))},getCookie:function(t){var e=localStorage.getItem(t);return e?(e=JSON.parse(e),Date.now()>e.expire?(localStorage.removeItem(t),null):(this.localexpire=e.expire,e.data)):e},delCookie:function(t){localStorage.removeItem(t)},format:function(t){t/=1e3;var e=Math.floor(t%60);e=e<10?"0"+e:e;var n=Math.floor(t/60);return n=n<10?"0"+n:n,"".concat(n,":").concat(e)},startExam:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e,n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!this.examingInfo||!this.examingInfo.user){t.next=2;break}return t.abrupt("return",this.showMessage("当前浏览器有人正在进行考试请完成之后,在进行其他考试",2));case 2:if(this.value){t.next=4;break}return t.abrupt("return",this.showMessage("请选择专业后进行考试",2));case 4:return e="考试中不要弹出考试页面进行操作,否则会被检测是作弊行为,提醒两次第三次直接交卷(若为操作题则可以弹出做操作题,但是不要切换成其他题做操作题)",t.prev=5,t.next=8,this.$confirm(e,"重要提示",{confirmButtonText:"开始考试",cancelButtonText:"在准备下",type:"warning"});case 8:t.sent,t.next=14;break;case 11:return t.prev=11,t.t0=t["catch"](5),t.abrupt("return");case 14:return t.next=16,M.get("/api/getQuestion",{params:{subject_id:this.value,major_id:this.userinfo.major_id}});case 16:if(n=t.sent,2!=n.code){t.next=21;break}this.showMessage("网络请求超时",2),t.next=39;break;case 21:if(1!=n.code){t.next=39;break}if(!n.exam_status){t.next=24;break}return t.abrupt("return",this.showMessage("当前科目已完成考试,请切换至其他科目",2));case 24:if(r=[],this.subject_id=n.subject_id,n.judge.forEach((function(t){t.type=1,t.title=t.judge_name,r.push(t)})),n.single.forEach((function(t){t.type=2,t.title=t.single_name,r.push(t)})),n.selection.forEach((function(t){t.title=t.selection_name,t.type=3,t.answer=[],r.push(t)})),n.operation.forEach((function(t){t.type=4,t.title=t.operation_name,r.push(t)})),0!==r.length){t.next=32;break}return t.abrupt("return",this.showMessage("当前考试没有题目,请切换一个进行考试",1));case 32:this.startTime(),this.showMessage(n.msg||"请在1小时内完成考试",1),this.stopShortCutKey(),this.examingInfo={question:r,user:this.userinfo.id_card,time:this.targetTime,subject_id:this.subject_id},this.setCookie("examingInfo",JSON.stringify(this.examingInfo),this.targetTime),this.questions=r,this.page="answerbox";case 39:case"end":return t.stop()}}),t,this,[[5,11]])})));function e(){return t.apply(this,arguments)}return e}()},components:{MProcess:F,TipTitle:it,tip:Z,MButton:C},destroyed:function(){this.time&&(clearInterval(this.timer),this.timer=null),this.func&&window.removeEventListener("blur",this.func),this.info&&this.info.close()},computed:ot({},Object(f["c"])({userinfo:function(t){return t.user.userinfo}}),{rate:function(){return 0!=this.questions.length?Math.round(this.finQuesCount/this.questions.length*100)+"%":"0%"},topicType:function(){return this.questions[this.cur-1].type},curTopic:function(){return this.questions[this.cur-1]},typeName:function(){var t=this.questions[this.cur-1].type;return this.type[t]},downHref:function(){return"/api/download?id=".concat(this.curTopic.id)},curSubject:function(){var t=this,e=null;return this.userinfo.subject.forEach((function(n){Number(n.id)===Number(t.subject_id)&&(e=n.major_name)})),e}})},ut=ct,lt=(n("4364"),Object(g["a"])(ut,A,H,!1,null,null,null)),pt=lt.exports,ft=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"commit"},[n("p",{staticClass:"title"},[t._v("恭喜提交成功"),n("span",[t._v(t._s(t.second))]),t._v("秒后跳转到成绩查询页面")]),n("div",{staticClass:"other_box"},[n("m-button",{attrs:{mstyle:{color:"#97ABFF",borderColor:"#97ABFF"},text:"直接跳转"},on:{callback:t.linkto}})],1)])},ht=[],dt={data:function(){return{second:3}},methods:{linkto:function(){this.$router.push("/score")}},mounted:function(){var t=this;this.timer=setInterval((function(){t.second--,t.second<=0&&t.$router.push("/score")}),1e3)},destroyed:function(){clearInterval(this.timer),this.timer=null},components:{MButton:C}},mt=dt,bt=(n("e4e5"),Object(g["a"])(mt,ft,ht,!1,null,"4cc80694",null)),gt=bt.exports,vt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"score"},[n("div",{staticClass:"score_box center"},[n("div",{staticClass:"title"},[t._v(t._s(t.userinfo.class_name)+"班级的"+t._s(t.userinfo.username)+"同学成绩如下")]),n("table",[t._m(0),n("tbody",t._l(t.date,(function(e,r){return n("tr",{key:r},[n("td",[t._v(t._s(r))]),n("td",[t._v(t._s(e.major_name))]),n("td",[t._v(t._s(e.subject_name))]),n("td",[t._v(t._s(e.single_scroe))]),n("td",[t._v(t._s(e.selection_scroe))]),n("td",[t._v(t._s(e.judge_scroe))]),n("td",[t._v(t._s(0==e.not_read?"未阅卷":e.operation_scroe))]),n("td",[t._v(t._s(0==e.not_read?"阅卷未完成":e.scroe))])])})),0)])])])},wt=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("thead",[n("th",[t._v("序号")]),n("th",[t._v("专业")]),n("th",[t._v("课程名称")]),n("th",[t._v("单选题")]),n("th",[t._v("多选题")]),n("th",[t._v("判断题")]),n("th",[t._v("操作题")]),n("th",[t._v("成绩")])])}];function _t(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function xt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?_t(n,!0).forEach((function(e){Object(p["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_t(n).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var yt={created:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,M.get("/api/getGrade",{params:{id_card:this.userinfo.id_card}});case 2:e=t.sent,this.date=e.scroe;case 4:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),computed:xt({},Object(f["c"])({userinfo:function(t){return t.user.userinfo}})),data:function(){return{date:[]}}},jt=yt,kt=(n("787f"),Object(g["a"])(jt,vt,wt,!1,null,"27ba28c4",null)),Ct=kt.exports,Ot={namespaced:!0,state:{isLogin:!1,userinfo:{msg:"未初始化数据"}},mutations:{init:function(t,e){t.userinfo=e,t.isLogin=!0},logout:function(){state.userinfo={},state.isLogin=!1}},actions:{initUserinfo:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(e,n){var r,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=e.commit,t.next=3,M.get("/api/getUserInfo");case 3:s=t.sent,s.admin&&(s.admin.subject=s.major_subject,r("init",s.admin));case 5:case"end":return t.stop()}}),t)})));function e(e,n){return t.apply(this,arguments)}return e}()}};r["default"].use(f["a"]);var Tt=new f["a"].Store({modules:{user:Ot}});r["default"].use(a["a"]);var Pt=new a["a"]({mode:"history",base:"/",routes:[{path:"/",name:"login",component:B},{path:"/answer",name:"answer",component:pt,meta:{auth:!0}},{path:"/commit",name:"commit",component:gt,meta:{auth:!0}},{path:"/score",name:"score",component:Ct,meta:{auth:!0}}]});Pt.beforeEach(function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(e,n,r){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Tt.dispatch("user/initUserinfo");case 2:if(!e.meta.auth){t.next=6;break}if(!Tt.state.user.isLogin){t.next=5;break}return t.abrupt("return",r());case 5:return t.abrupt("return",r({path:"",query:{redirect:e.path,errinfo:"请登陆账号后访问"}}));case 6:return t.abrupt("return",r());case 7:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}());var Mt=Pt,St=n("7893"),Et=n.n(St);n("610a"),n("98b9"),n("3d99"),n("fc73");r["default"].use(Et.a),r["default"].config.productionTip=!1,document.onkeydown=function(){window.event&&123==window.event.keyCode&&(event.returnValue=!1)},document.oncontextmenu=function(t){window.event&&(t=window.event);try{var e=t.srcElement;return"INPUT"==e.tagName&&"text"==e.type.toLowerCase()||"TEXTAREA"==e.tagName}catch(n){return!1}},console.log("提交完成页面:/commit"),console.log("查看分数页面:/score"),console.log("登陆页面:/"),console.log("答题页面:/answer"),new r["default"]({router:Mt,store:Tt,render:function(t){return t(s["default"])}}).$mount("#app")},"670b":function(t,e,n){},6897:function(t,e,n){"use strict";var r=n("4862"),s=n.n(r);s.a},"6aec":function(t,e,n){},"75cb":function(t,e,n){},"787f":function(t,e,n){"use strict";var r=n("ff4b"),s=n.n(r);s.a},"7d4d":function(t,e,n){"use strict";var r=n("b1d2"),s=n.n(r);s.a},"98b9":function(t,e,n){},ad02:function(t,e,n){"use strict";var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("router-view")],1)},s=[];n.d(e,"a",(function(){return r})),n.d(e,"b",(function(){return s}))},b1d2:function(t,e,n){},c7fe:function(t,e,n){"use strict";var r=n("cd7b"),s=n.n(r);s.a},cd7b:function(t,e,n){},db97:function(t,e,n){},de0b:function(t,e,n){"use strict";var r=n("31cd"),s=n.n(r);s.a},e4e5:function(t,e,n){"use strict";var r=n("75cb"),s=n.n(r);s.a},fc73:function(t,e,n){},ff4b:function(t,e,n){}});
//# sourceMappingURL=app.80e2a64e.js.map
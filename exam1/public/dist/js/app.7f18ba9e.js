(function(e){function t(t){for(var r,a,o=t[0],c=t[1],u=t[2],p=0,f=[];p<o.length;p++)a=o[p],Object.prototype.hasOwnProperty.call(s,a)&&s[a]&&f.push(s[a][0]),s[a]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(e[r]=c[r]);l&&l(t);while(f.length)f.shift()();return i.push.apply(i,u||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],r=!0,o=1;o<n.length;o++){var c=n[o];0!==s[c]&&(r=!1)}r&&(i.splice(t--,1),e=a(a.s=n[0]))}return e}var r={},s={app:0},i=[];function a(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=e,a.c=r,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)a.d(n,r,function(t){return e[t]}.bind(null,r));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=t,o=o.slice();for(var u=0;u<o.length;u++)t(o[u]);var l=c;i.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"085d":function(e,t,n){},1818:function(e,t,n){"use strict";var r=n("52f3"),s=n.n(r);s.a},"1b6b":function(e,t,n){"use strict";var r=n("db97"),s=n.n(r);s.a},"23be":function(e,t,n){"use strict";var r=n("23c4"),s=n.n(r);t["default"]=s.a},"23c4":function(e,t){},"31cd":function(e,t,n){},"3d99":function(e,t,n){},"3dfd":function(e,t,n){"use strict";var r=n("ad02"),s=n("23be"),i=(n("1818"),n("6691")),a=Object(i["a"])(s["default"],r["a"],r["b"],!1,null,null,null);t["default"]=a.exports},4364:function(e,t,n){"use strict";var r=n("670b"),s=n.n(r);s.a},4624:function(e,t,n){"use strict";var r=n("085d"),s=n.n(r);s.a},4862:function(e,t,n){},"52ab":function(e,t,n){"use strict";var r=n("6aec"),s=n.n(r);s.a},"52f3":function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);n("dac5"),n("6e26"),n("9604"),n("df67");var r=n("6e6d"),s=n("3dfd"),i=(n("63ff"),n("ad3e")),a=n("c478"),o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"login-page"},[n("div",{staticClass:"center login-wrpper-box"},[e._m(0),n("m-login-box")],1)])},c=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"pic-info"},[n("div",{staticClass:"circle"}),n("div",{staticClass:"info"},[n("p",[e._v("制作人: 刘友刚,张旭东,岳长春")]),n("p",[e._v("制作时间: 2019")]),n("p",[e._v("指导老师: 陈雪东")])])])}],u=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"login_box"},[n("h3",{staticClass:"title neo"},[e._v(e._s(e.title))]),"login"==e.cur?n("div",[n("m-input",{model:{value:e.username,callback:function(t){e.username=t},expression:"username"}}),n("m-input",{attrs:{type:"password",placeholder:"密码"},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),n("div",{staticClass:"btns clearfix"},[n("m-button",{attrs:{text:"登陆"},on:{callback:e.login}}),n("m-button",{attrs:{text:"前往修改密码"},on:{callback:e.gotoRepass}})],1)],1):e._e(),"repass"==e.cur?n("div",[n("m-input",{model:{value:e.cusername,callback:function(t){e.cusername=t},expression:"cusername"}}),n("m-input",{attrs:{type:"password",placeholder:"原密码"},model:{value:e.cpassword,callback:function(t){e.cpassword=t},expression:"cpassword"}}),n("m-input",{attrs:{type:"password",placeholder:"输入要修改的密码"},model:{value:e.crepassword,callback:function(t){e.crepassword=t},expression:"crepassword"}}),n("div",{staticClass:"btns clearfix"},[n("m-button",{attrs:{text:"修改密码"},on:{callback:e.changePsd}}),n("m-button",{attrs:{text:"前往登陆页面"},on:{callback:e.gotoLogin}})],1)],1):e._e()])},l=[],p=(n("2338"),n("f763"),n("fb37"),n("5bf7")),f=n("591a"),h=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"m_input"},[n("label",[null!=e.title?n("span",[e._v(e._s(e.title))]):e._e(),n("input",{attrs:{type:e.type,placeholder:e.placeholder},domProps:{value:e.value},on:{input:e.change}})])])},d=[],m={props:{title:{type:String,default:null},placeholder:{type:String,default:"用户名"},type:{type:String,default:"text"},value:{type:String,default:""}},methods:{change:function(e){this.$emit("input",e.target.value)}},data:function(){return{}}},b=m,v=(n("de0b"),n("6691")),g=Object(v["a"])(b,h,d,!1,null,null,null),w=g.exports,_=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("button",{staticClass:"m-btn neo",style:e.mstyle,domProps:{textContent:e._s(e.text)},on:{click:e.dosome}})},x=[],y={props:{text:{type:String,required:!0},mstyle:{type:Object}},data:function(){return{}},methods:{dosome:function(){this.$emit("callback")}}},k=y,j=(n("c7fe"),Object(v["a"])(k,_,x,!1,null,null,null)),O=j.exports,C=n("2427"),T=n.n(C),S=T.a.create({timeout:2e3,withCredentials:!0,headers:{"Content-Type":"application/x-www-form-urlencoded"},transformRequest:[function(e){var t="";for(var n in e)t+=encodeURIComponent(n)+"="+encodeURIComponent(e[n])+"&";return t}]});S.interceptors.request.use((function(e){return"GET"==e.method.toUpperCase()||e.method.toUpperCase(),e}),(function(e){Promise.reject(e)})),S.interceptors.response.use((function(e){if("OK"==e.statusText)return e.data}),(function(e){var t=e.message;if("timeout of 2000ms exceeded"===t)return{code:2};Promise.reject(e)}));var P=S;function $(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function M(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$(n,!0).forEach((function(t){Object(p["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var E={mounted:function(){this.$route.query.errinfo&&this.showMessage(this.$route.query.errinfo,2)},data:function(){return{title:"考试系统登陆",cur:"login",username:"",password:"",cusername:"",cpassword:"",crepassword:"",isshow:!1,message:"提示信息",isClick:!1,boxMessage:null}},methods:M({gotoRepass:function(){this.isClick=!1,this.cur="repass"},gotoLogin:function(){this.isClick=!1,this.cur="login"},showMessage:function(e,t){switch(this.boxMessage&&this.boxMessage.close(),t){case 1:this.boxMessage=this.$message(e);break;case 2:this.boxMessage=this.$message.error(e);break}},login:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!this.isClick){e.next=2;break}return e.abrupt("return");case 2:return this.isClick=!0,e.next=5,P.post("/api/login",{username:this.username,password:this.password});case 5:if(t=e.sent,t){e.next=9;break}return this.isClick=!1,e.abrupt("return");case 9:t.code?2==t.code?this.showMessage("网络请求超时",2):1==t.code&&(this.showMessage(t.msg||"登陆成功",1),t.data.subject=t.major_subject,this.init(t.data),this.$route.query.redirect?this.$router.push(this.$route.query.redirect):this.$router.push("/answer")):this.showMessage(t.msg||"登陆失败:账号或密码错误,请重试",2),this.isClick=!1;case 11:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),changePsd:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!this.isClick){e.next=2;break}return e.abrupt("return");case 2:return this.isClick=!0,e.next=5,P.post("/api/changePassword",{username:this.cusername,cpassword:this.cpassword,crepassword:this.crepassword});case 5:if(t=e.sent,t){e.next=9;break}return this.isClick=!1,e.abrupt("return");case 9:t.code?2==t.code?this.showMessage("网络请求超时",2):1==t.code&&(this.showMessage(t.msg||"修改密码成功",1),this.gotoLogin()):this.showMessage(t.msg||"修改失败,请检查输入",2),isClick=!1;case 11:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},Object(f["b"])("user",["init"])),computed:M({},Object(f["c"])({userinfo:function(e){return e.user.userinfo}})),components:{MInput:w,MButton:O}},I=E,q=(n("7d4d"),Object(v["a"])(I,u,l,!1,null,null,null)),R=q.exports,D={data:function(){return{}},components:{MLoginBox:R}},N=D,B=(n("52ab"),Object(v["a"])(N,o,c,!1,null,null,null)),L=B.exports,U=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"answer"},["checkbox"==e.page?n("div",{staticClass:"check-box center"},[n("div",{staticClass:"avator"},[n("span",{on:{click:function(t){return e.$router.push("/score")}}},[e._v("查看以前考试成绩")])]),n("el-input",{staticClass:"classmate",attrs:{placeholder:"当前班级",readonly:""},model:{value:e.input,callback:function(t){e.input=t},expression:"input"}}),n("br"),n("el-input",{staticClass:"classmate",attrs:{placeholder:"当前班级",readonly:""},model:{value:e.options[0].major_name,callback:function(t){e.$set(e.options[0],"major_name",t)},expression:"options[0].major_name"}}),n("br"),n("el-select",{staticClass:"examtype",attrs:{placeholder:"请选择考试科目"},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},e._l(e.options,(function(e){return n("el-option",{key:e.value,attrs:{label:e.subject_name,value:e.id}})})),1),n("br"),n("el-button",{staticClass:"enter-btn",attrs:{type:"primary",plain:""},on:{click:e.startExam}},[e._v("开始考试")])],1):e._e(),"answerbox"==e.page?n("div",{staticClass:"answer_box_wrapper"},[n("h3",{staticClass:"main-title"},[e._v("请同学认真考试哦")]),n("div",{staticClass:"answer_box"},[n("div",{staticClass:"box_header"},[n("div",{staticClass:"pro"},[n("m-process",{attrs:{rate:e.rate}})],1),n("span",{staticClass:"total"},[e._v("当前第"+e._s(e.cur)+"题共"+e._s(e.questions.length)+"题")]),n("span",{staticClass:"time"},[e._v("剩下时间: "+e._s(e.formatTime))])]),n("div",{staticClass:"tab"},[n("i",{staticClass:"iconfont icon-label_fill"}),n("span",[e._v(e._s(e.typeName))])]),n("div",{staticClass:"answer_place"},[n("tip-title",{attrs:{count:e.cur,question:e.questions[e.cur-1].title}}),2==e.topicType?n("div",{staticClass:"answers"},[n("el-radio",{attrs:{label:"A"},model:{value:e.curTopic.answer,callback:function(t){e.$set(e.curTopic,"answer",t)},expression:"curTopic.answer"}},[e._v(e._s(e.curTopic.A))]),n("el-radio",{attrs:{label:"B"},model:{value:e.curTopic.answer,callback:function(t){e.$set(e.curTopic,"answer",t)},expression:"curTopic.answer"}},[e._v(e._s(e.curTopic.B))]),n("el-radio",{attrs:{label:"C"},model:{value:e.curTopic.answer,callback:function(t){e.$set(e.curTopic,"answer",t)},expression:"curTopic.answer"}},[e._v(e._s(e.curTopic.C))]),n("el-radio",{attrs:{label:"D"},model:{value:e.curTopic.answer,callback:function(t){e.$set(e.curTopic,"answer",t)},expression:"curTopic.answer"}},[e._v(e._s(e.curTopic.D))])],1):e._e(),1==e.topicType?n("div",{staticClass:"answers"},[n("el-radio",{attrs:{label:"1"},model:{value:e.curTopic.answer,callback:function(t){e.$set(e.curTopic,"answer",t)},expression:"curTopic.answer"}},[e._v("对")]),n("el-radio",{attrs:{label:"0"},model:{value:e.curTopic.answer,callback:function(t){e.$set(e.curTopic,"answer",t)},expression:"curTopic.answer"}},[e._v("错")])],1):e._e(),3==e.topicType?n("div",{staticClass:"answers"},[n("el-checkbox-group",{model:{value:e.curTopic.answer,callback:function(t){e.$set(e.curTopic,"answer",t)},expression:"curTopic.answer"}},[n("el-checkbox",{attrs:{label:"A"}},[e._v(e._s(e.curTopic.A))]),n("el-checkbox",{attrs:{label:"B"}},[e._v(e._s(e.curTopic.B))]),n("el-checkbox",{attrs:{label:"C"}},[e._v(e._s(e.curTopic.C))]),n("el-checkbox",{attrs:{label:"D"}},[e._v(e._s(e.curTopic.D))])],1)],1):e._e(),4==e.topicType?n("div",{staticClass:"answers"},[""===e.curTopic.pathinfo?n("el-input",{attrs:{type:"textarea",rows:6,placeholder:"请输入内容",resize:"none","data-type":"4"},model:{value:e.curTopic.answer,callback:function(t){e.$set(e.curTopic,"answer",t)},expression:"curTopic.answer"}}):e._e(),""!==e.curTopic.pathinfo?n("div",{staticClass:"upload-box"},[e.curTopic.isUpload?e._e():n("div",[n("p",{staticClass:"b15"},[e._v("🔹 点击下面按钮进行下载考题")]),n("a",{staticClass:"my-btn b15",attrs:{href:e.downHref}},[e._v("点击下载考试题目")]),n("p",{staticClass:"b15"},[e._v("🔹 题目做完后打包成zip点击下面按钮上传")]),n("el-upload",{ref:"upload",staticClass:"upload",attrs:{action:"/api/upload",name:"file",limit:1,data:{id_card:e.userinfo.id_card,subject_id:e.examingInfo.subject_id},"on-success":e.handlePreview,"file-list":e.fileList,"auto-upload":!0}},[n("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[e._v("选取文件进行上传")])],1)],1),e.curTopic.isUpload?n("div",[e._v("\n                            🔹 当前操作题文件以上传,请去完成其他题 🔹 \n                        ")]):e._e()]):e._e()],1):e._e()],1),n("div",{staticClass:"submit-box"},[n("m-button",{attrs:{mstyle:e.buttonStyle,text:"上一题"},on:{callback:e.prev}}),n("m-button",{attrs:{mstyle:e.buttonStyle,text:"提交试卷"},on:{callback:e.commit}}),n("m-button",{attrs:{mstyle:e.buttonStyle,text:"下一题"},on:{callback:e.next}})],1)])]):e._e()])},J=[],A=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"process-wrapper"},[n("div",{staticClass:"process-inner",style:{width:e.rate}}),n("div",{staticClass:"title"},[e._v("\n        已完成"+e._s(e.rate)+"\n    ")])])},Q=[],V={props:{rate:{type:String,default:"10%"}},data:function(){return{}}},z=V,F=(n("1b6b"),Object(v["a"])(z,A,Q,!1,null,null,null)),K=F.exports,G=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"tip"},[n("label",[n("input",{attrs:{"data-type":e.dataType,name:e.name,type:e.type},domProps:{checked:e.check,value:e.value},on:{change:e.changeValue}}),n("span",[e._v(e._s(e.answer))])])])},H=[],X={props:{type:{type:String,default:"radio"},answer:{type:String,require:!0},name:{type:String,required:!0},value:{type:String,default:"0"},dataType:{type:String,default:null},check:{type:Boolean,default:!1}},data:function(){return{}},methods:{changeValue:function(e){this.$emit("changeValue",e)}}},W=X,Y=(n("4624"),Object(v["a"])(W,G,H,!1,null,null,null)),Z=Y.exports,ee=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"title"},[e._v("第 "+e._s(e.count)+" 题 、"+e._s(e.question)+"？")])},te=[],ne=(n("d4d5"),{props:{count:{type:Number,default:1},question:{type:String,default:"问题是?"}},data:function(){return{}}}),re=ne,se=(n("6897"),Object(v["a"])(re,ee,te,!1,null,null,null)),ie=se.exports;function ae(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function oe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ae(n,!0).forEach((function(t){Object(p["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ae(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ce={data:function(){return{buttonStyle:{fontSize:"12px",width:"80px",height:"30px",marginTop:"8px",marginRight:"20px"},type:[" ","判断题","单选题","多选题","操作题"],page:"checkbox",options:[],value:"",input:"",questions:[],cur:1,finQuesCount:0,curValue:null,targetTime:null,formatTime:null,allowNum:3,message:null,examingInfo:{},fileList:[]}},created:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.input=this.userinfo.class_name,this.options=this.userinfo.subject,this.examingInfo=JSON.parse(this.getCookie("examingInfo")),this.examingInfo){e.next=5;break}return e.abrupt("return");case 5:this.examingInfo.user===this.userinfo.id_card&&(this.info=this.$notify({title:"考试提醒",message:"你有正在进行的考试,点击继续考试",duration:0,showClose:!1,type:"warning",onClick:function(){if(Date.now()>t.localexpire)return t.info.close(),t.showMessage("当前考试已结束",1);t.questions=t.examingInfo.question,t.targetTime=t.examingInfo.time,t.subject_id=t.examingInfo.subject_id,t.startTime(),t.calc(),t.stopShortCutKey(),t.page="answerbox",t.info.close()}}));case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),methods:{handlePreview:function(e){e.code?(this.showMessage("上传成功",1),this.curTopic.isUpload=!0,this.curTopic.answer="上传成功",this.calc(),this.examingInfo.question=this.questions,this.setCookie("examingInfo",JSON.stringify(this.examingInfo),this.targetTime)):this.showMessage("上传失败,请重试",2)},startTime:function(){var e=this;if(!this.targetTime){var t=new Date;this.targetTime=t.setSeconds(t.getSeconds()+5400)}this.timer=setInterval((function(){var t=e.targetTime-new Date;e.formatTime=e.format(t),"00:00"===e.formatTime&&(e.showMessage("答题时间结束,自动交卷",1),e.commitExam(2),clearInterval(e.timer))}))},showMessage:function(e,t){switch(this.message&&this.message.close(),t){case 1:this.message=this.$message(e);break;case 2:this.message=this.$message.error(e);break}},stopShortCutKey:function(){var e=this;if("511922200101100516"!==this.userinfo.id_card&&"510311200012282917"!==this.userinfo.id_card&&"513821200105278856"!==this.userinfo.id_card){var t=this.allowNum;this.func=function(){if(!e.curTopic||4!==e.curTopic.type){if(t--,t<=0)return window.removeEventListener("blur",e.func),e.commitExam(1),e.showMessage("自动交卷",2);e.$alert("认真考试,否则将视为作弊","提示",{confirmButtonText:"确定"})}},window.addEventListener("blur",this.func)}},calc:function(){var e=0;this.questions.forEach((function(t){t.answer&&t.answer.length>0&&e++})),this.finQuesCount=e},next:function(){this.cur>=this.questions.length?(this.showMessage("这已经是最后一题",1),this.cur=this.questions.length):this.cur++,this.calc(),this.examingInfo.question=this.questions,this.setCookie("examingInfo",JSON.stringify(this.examingInfo),this.targetTime)},commit:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.$confirm("确认提交试卷吗","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){if(t.finQuesCount!==t.questions.length)return t.showMessage("必须完成所有题,才能交卷",2);t.commitExam()}));case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),commitExam:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t,n,r=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:0,e.next=3,P.post("/api/commitQuestion",{questions:JSON.stringify(this.questions),subject_id:this.subject_id,error:t});case 3:n=e.sent,2==n.code?this.showMessage("网络请求超时",2):1==n.code&&this.$router.push("/commit"),this.delCookie("examingInfo");case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),prev:function(){this.cur<=1?this.cur=1:this.cur--,this.calc(),this.examingInfo.question=this.questions,this.setCookie("examingInfo",JSON.stringify(this.examingInfo),this.targetTime)},setCookie:function(e,t,n){var r={data:t,time:Date.now(),expire:n};localStorage.setItem(e,JSON.stringify(r))},getCookie:function(e){var t=localStorage.getItem(e);return t?(t=JSON.parse(t),Date.now()>t.expire?(localStorage.removeItem(e),null):(this.localexpire=t.expire,t.data)):t},delCookie:function(e){localStorage.removeItem(e)},format:function(e){e/=1e3;var t=Math.floor(e%60);t=t<10?"0"+t:t;var n=Math.floor(e/60);return n=n<10?"0"+n:n,"".concat(n,":").concat(t)},startExam:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!this.examingInfo||!this.examingInfo.user){e.next=2;break}return e.abrupt("return",this.showMessage("当前浏览器有人正在进行考试请完成之后,在进行其他考试",2));case 2:if(this.value){e.next=4;break}return e.abrupt("return",this.showMessage("请选择专业后进行考试",2));case 4:return e.next=6,P.get("/api/getQuestion",{params:{subject_id:this.value,major_id:this.userinfo.major_id}});case 6:if(t=e.sent,2!=t.code){e.next=11;break}this.showMessage("网络请求超时",2),e.next=29;break;case 11:if(1!=t.code){e.next=29;break}if(!t.exam_status){e.next=14;break}return e.abrupt("return",this.showMessage("当前科目已完成考试,请切换至其他科目",2));case 14:if(n=[],this.subject_id=t.subject_id,t.judge.forEach((function(e){e.type=1,e.title=e.judge_name,n.push(e)})),t.single.forEach((function(e){e.type=2,e.title=e.single_name,n.push(e)})),t.selection.forEach((function(e){e.title=e.selection_name,e.type=3,e.answer=[],n.push(e)})),t.operation.forEach((function(e){e.type=4,e.title=e.operation_name,n.push(e)})),0!==n.length){e.next=22;break}return e.abrupt("return",this.showMessage("当前考试没有题目,请切换一个进行考试",1));case 22:this.startTime(),this.showMessage(t.msg||"请在1小时内完成考试",1),this.stopShortCutKey(),this.examingInfo={question:n,user:this.userinfo.id_card,time:this.targetTime,subject_id:this.subject_id},this.setCookie("examingInfo",JSON.stringify(this.examingInfo),this.targetTime),this.questions=n,this.page="answerbox";case 29:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},components:{MProcess:K,TipTitle:ie,tip:Z,MButton:O},destroyed:function(){this.time&&(clearInterval(this.timer),this.timer=null),this.func&&window.removeEventListener("blur",this.func)},computed:oe({},Object(f["c"])({userinfo:function(e){return e.user.userinfo}}),{rate:function(){return 0!=this.questions.length?Math.round(this.finQuesCount/this.questions.length*100)+"%":"0%"},topicType:function(){return this.questions[this.cur-1].type},curTopic:function(){return this.questions[this.cur-1]},typeName:function(){var e=this.questions[this.cur-1].type;return this.type[e]},downHref:function(){return"/api/download?id=".concat(this.curTopic.id)}})},ue=ce,le=(n("4364"),Object(v["a"])(ue,U,J,!1,null,null,null)),pe=le.exports,fe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"commit"},[n("p",{staticClass:"title"},[e._v("恭喜提交成功"),n("span",[e._v(e._s(e.second))]),e._v("秒后跳转到成绩查询页面")]),n("div",{staticClass:"other_box"},[n("m-button",{attrs:{mstyle:{color:"#97ABFF",borderColor:"#97ABFF"},text:"直接跳转"},on:{callback:e.linkto}})],1)])},he=[],de={data:function(){return{second:3}},methods:{linkto:function(){this.$router.push("/score")}},mounted:function(){var e=this;this.timer=setInterval((function(){e.second--,e.second<=0&&e.$router.push("/score")}),1e3)},destroyed:function(){clearInterval(this.timer),this.timer=null},components:{MButton:O}},me=de,be=(n("e4e5"),Object(v["a"])(me,fe,he,!1,null,"4cc80694",null)),ve=be.exports,ge=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"score"},[n("div",{staticClass:"score_box center"},[n("div",{staticClass:"title"},[e._v(e._s(e.userinfo.class_name)+"班级的"+e._s(e.userinfo.username)+"同学成绩如下")]),n("table",[e._m(0),n("tbody",e._l(e.date,(function(t,r){return n("tr",{key:r},[n("td",[e._v(e._s(r))]),n("td",[e._v(e._s(t.major_name))]),n("td",[e._v(e._s(t.subject_name))]),n("td",[e._v(e._s(t.single_scroe))]),n("td",[e._v(e._s(t.selection_scroe))]),n("td",[e._v(e._s(t.judge_scroe))]),n("td",[e._v(e._s(0==t.not_read?"未阅卷":t.operation_scroe))]),n("td",[e._v(e._s(0==t.not_read?"阅卷未完成":t.scroe))])])})),0)])])])},we=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("thead",[n("th",[e._v("序号")]),n("th",[e._v("专业")]),n("th",[e._v("课程名称")]),n("th",[e._v("单选题")]),n("th",[e._v("多选题")]),n("th",[e._v("判断题")]),n("th",[e._v("操作题")]),n("th",[e._v("成绩")])])}];function _e(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function xe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_e(n,!0).forEach((function(t){Object(p["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_e(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ye={created:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,P.get("/api/getGrade",{params:{id_card:this.userinfo.id_card}});case 2:t=e.sent,this.date=t.scroe;case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),computed:xe({},Object(f["c"])({userinfo:function(e){return e.user.userinfo}})),data:function(){return{date:[]}}},ke=ye,je=(n("787f"),Object(v["a"])(ke,ge,we,!1,null,"27ba28c4",null)),Oe=je.exports,Ce={namespaced:!0,state:{isLogin:!1,userinfo:{msg:"未初始化数据"}},mutations:{init:function(e,t){e.userinfo=t,e.isLogin=!0},logout:function(){state.userinfo={},state.isLogin=!1}},actions:{initUserinfo:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t,n){var r,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t.commit,e.next=3,P.get("/api/getUserInfo");case 3:s=e.sent,s.admin&&(s.admin.subject=s.major_subject,r("init",s.admin));case 5:case"end":return e.stop()}}),e)})));function t(t,n){return e.apply(this,arguments)}return t}()}};r["default"].use(f["a"]);var Te=new f["a"].Store({modules:{user:Ce}});r["default"].use(a["a"]);var Se=new a["a"]({mode:"history",base:"/",routes:[{path:"/",name:"login",component:L},{path:"/answer",name:"answer",component:pe,meta:{auth:!0}},{path:"/commit",name:"commit",component:ve,meta:{auth:!0}},{path:"/score",name:"score",component:Oe,meta:{auth:!0}}]});Se.beforeEach(function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t,n,r){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Te.dispatch("user/initUserinfo");case 2:if(!t.meta.auth){e.next=6;break}if(!Te.state.user.isLogin){e.next=5;break}return e.abrupt("return",r());case 5:return e.abrupt("return",r({path:"",query:{redirect:t.path,errinfo:"请登陆账号后访问"}}));case 6:return e.abrupt("return",r());case 7:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}());var Pe=Se,$e=n("7893"),Me=n.n($e);n("610a"),n("98b9"),n("3d99"),n("fc73");r["default"].use(Me.a),r["default"].config.productionTip=!1,document.onkeydown=function(){window.event&&123==window.event.keyCode&&(event.returnValue=!1)},document.oncontextmenu=function(e){window.event&&(e=window.event);try{var t=e.srcElement;return"INPUT"==t.tagName&&"text"==t.type.toLowerCase()||"TEXTAREA"==t.tagName}catch(n){return!1}},console.log("提交完成页面:/commit"),console.log("查看分数页面:/score"),console.log("登陆页面:/"),console.log("答题页面:/answer"),console.log("type取值 1为判断题 2为选择题 3为多选题 4为操作题"),new r["default"]({router:Pe,store:Te,render:function(e){return e(s["default"])}}).$mount("#app")},"670b":function(e,t,n){},6897:function(e,t,n){"use strict";var r=n("4862"),s=n.n(r);s.a},"6aec":function(e,t,n){},"75cb":function(e,t,n){},"787f":function(e,t,n){"use strict";var r=n("ff4b"),s=n.n(r);s.a},"7d4d":function(e,t,n){"use strict";var r=n("b1d2"),s=n.n(r);s.a},"98b9":function(e,t,n){},ad02:function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("router-view")],1)},s=[];n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return s}))},b1d2:function(e,t,n){},c7fe:function(e,t,n){"use strict";var r=n("cd7b"),s=n.n(r);s.a},cd7b:function(e,t,n){},db97:function(e,t,n){},de0b:function(e,t,n){"use strict";var r=n("31cd"),s=n.n(r);s.a},e4e5:function(e,t,n){"use strict";var r=n("75cb"),s=n.n(r);s.a},fc73:function(e,t,n){},ff4b:function(e,t,n){}});
//# sourceMappingURL=app.7f18ba9e.js.map